## Creating a project from scratch

1. Open ISE, go to File -> New Project, and specify the location for the project directory and the project's name.  At the bottom of the dialog, set the top-level source to 'HDL'
2. On the next pane (Project Settings), set the Family to 'Spartan6', the Device to either 'XC6SLX16' or 'XC6SLX45' (depending on your board), the package to 'CSG324', and the speed grade to '-3'.  Under Preferred Language, set this to 'VHDL' and the source analysis standard to 'VHDL-93'.
3. On the next page, click 'Finish'.

    You should now have a new directory under your project name.

4. Under the new project directory, create a directory called 'sources'.  Copy all VHDL files and the .ucf file into this directory.
5. We will now need to regenerate all the IP components for clocking, multiplication, and the memory interface.  Under 'Tools', open the 'Core Generator'.  We'll start with clocking.
    1. Under the Core Generator, go to 'FPGA Features and Design', then 'Clocking', and then 'Clocking Wizard'.  Double click on that.
    2. Under the Clocking Wizard, rename the component to be 'dcm1'.  The default values on this page should be fine, but make sure that the input clock frequency is 100 MHz and a 'single ended clock capable pin'.
    3. On the next page, enable 'CLK_OUT2' and set the output frequency to 50 MHz.  On the next page, disable the 'RESET' and 'LOCKED' pins - we don't need them.
    4. Click through the rest of the pages and click 'Generate'.
6. Our next component is the multiplier
    1. Under the Core Generator, go to 'Math Functions', then 'Multipliers', and double click on 'Multipler'.  
    2. Name the component 'K_Multiplier'.  Set the type to 'parallel' and set port A to be a signed type with a width of 40 bits, and set port B to be unsigned with a width of 16 bits.
    3. On the next page, set the multiplier construction to 'Use Mults' and the optimization options to be 'Area Optimized'
    4. On the next page, set the pipelining stages to 6 - this should also be the optimal value reported by the Core Generator.  Click Generate.
7. The last component is the memory interface.
    1. Under the Core Generator, go to 'Memories & Storage Elements', then 'Memory Interface Generators', and then double click on 'MIG Virtex-6 and Spartan-6'.
    2. The first page of the generator should show the project options.  Make sure that the FPGA family, part and speed grade are all what you set in ISE.  Also make sure that the Design Entry is in VHDL.
    2. On the next page, we want to 'Create Design'.  Call the component 's6_lpddr'
    3. Click next on the next page.
    4. On the page 'Memory Selection', choose Bank 3 to have an LPDDR memory type.
    5. On the next page 'Options for C3-LPDDR', set the clock period to 10000 ps (100 MHz).  Set the part number to be 'MT46H32M16XXXX-5'
    6. Leave everything the same on the next page.
    7. On the page 'Port Configuration', set the it to 'Four 32-bit bi-directional ports'.  We are going to create only a single servo, so disable ports 1 - 3.  Leave the memory address mapping selection on Row-Bank-Column.
    8. Click 'Next' on the next page, 'Arbitration'.
    9. Under the next page 'FPGA options', set the RZQ pin to 'N4', disable the debugging signals, and set the 'system clock' to 'single-ended'
    10. Click through the rest of the pages and generate the output.
    11. In ISE, click 'Add Source' and then navigate to 'ipcore_dir/s6_lpddr/user_design/rtl/' and add all the files in the folder.
    12. The design generated by MIG technically won't work with a clock signal generated by the DCM we created earlier, so we need to modify the VHDL files.  In the file 'memc3_infrastructure', find the _generate_ statement 'se_input_clk'.  You will need to comment out the IBUFG component and add the line 'sys_clk_ibufg <= sys_clk;'.  You will also need to chanel the generic constant 'COMPENSATION' under the component 'u_pll_adv' from 'INTERNAL' to 'DCM2PLL'.

    